<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
	<script async src="/src/gas.js"></script>

	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>McbeEringi xor</title>
	<meta name="description" content="xor encrypter">
	<link rel="icon" type="image/svg+xml" href="../img/icon.svg">
	<link rel="apple-touch-icon" href="../img/icon.png">
	<meta name="theme-color" content="#214"/>

	<link rel="stylesheet" href="../src/style.css">
</head>
<body>
	<h1>xor</h1>
	<hr>
	<input type="file" class="zab" id="f" multiple><br>
	<input class="zab" value="0b11111111" id="i"><br>
	<button type="button" class="zab bgca" id="b">run</button>
	<div id="s"></div>
	<hr>
	<pre>
//example
let t='text data',
fx=()=>{
	cont k=0b11111111;
	new Blob([t]).arrayBuffer()
		.then(b=>new Blob([new Int8Array(b).map(y=>y^k).buffer]))
		.then(b=>b.arrayBuffer())
		.then(b=>new Blob([new Int8Array(b).map(y=>y^k).buffer]).text())
		.then(s=>t=s);
	console.log(t);
};
setInterval(fx,50);
	</pre>
	<script>
		b.onclick=()=>{
			const k=Number(i.value);
			[...f.files].forEach(x=>
				x.arrayBuffer().then(b=>new Int8Array(b).map(y=>y^k).buffer).then(b=>{
					let a=document.createElement('a');
					a.textContent=a.download=x.name;a.href=URL.createObjectURL(new Blob([b]));
					setTimeout(()=>{URL.revokeObjectURL(a.href);s.removeChild(a);},30000);s.appendChild(a);
				})
			)
		};
	</script>
</body>
</html>
